<div class="block-left">
    <div class="block-title">
        {{ctrlCustomerBlock.customer.name}}
    </div>
    <div class="block-extra-info">
        <div class="block-extra-info-row">
            <div class="block-extra-info-label">Total received:</div>
            <div class="block-extra-info-value">{{ctrlCustomerBlock.customer.totalReceived | number}}</div>
        </div>
        <div class="block-extra-info-row">
            <div class="block-extra-info-label">Last received on:</div>
            <div class="block-extra-info-value">{{ctrlCustomerBlock.customer.lastReceivedOn | date : 'MM/dd/yyyy HH:mm:ss'}}</div>
        </div>
        <div class="block-extra-info-row">
            <div class="block-extra-info-label">DB Connections:</div>
            <div class="block-extra-info-value">{{ctrlCustomerBlock.customer.databaseConnections}} ({{ctrlCustomerBlock.customer.idleDatabaseConnections}} idle)</div>
        </div>
    </div>
</div>

<div class="block-right">
    <div class="block-count">
        <span>{{ctrlCustomerBlock.customer.backlog}}</span>
    </div>
    <div class="block-controls">
        <button type="button" class="btn btn-default" ng-model="ctrlCustomerBlock.customer.expanded" uib-btn-checkbox title="Toggle the tracker display for this customer">
            <span class="fa fa-lg"                      
                    ng-class="{'fa-angle-double-down': !ctrlCustomerBlock.customer.expanded, 'fa-angle-double-up': ctrlCustomerBlock.customer.expanded}" 
                    aria-hidden="true"></span>
        </button>
    </div>
</div>

<div id="tracker-list" ng-show="ctrlCustomerBlock.customer.expanded">
    <table st-table="rowCollection" class="table table-striped">
        <thead>
            <tr>
                <td st-ratio="20">Tracker</td>
                <td st-ratio="20">Asset</td>
                <td st-ratio="25">Total Rx</td>
                <td st-ratio="20">Last Rx On</td>
                <td st-ratio="15">Backlog</td>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="tracker in ctrlCustomerBlock.customer.trackers">
                <td st-ratio="20">{{tracker.trackerName}}</td>
                <td st-ratio="20">{{tracker.assetName}}</td>
                <td st-ratio="25">{{tracker.totalReceived | number}}</td>
                <td st-ratio="20">{{tracker.lastReceivedOn | date : 'MM/dd/yyyy HH:mm:ss'}}</td>
                <td st-ratio="15" class="tracker-list-backlog">{{tracker.backlog}}</td>
            </tr>
        </tbody>
    </table>
</div>