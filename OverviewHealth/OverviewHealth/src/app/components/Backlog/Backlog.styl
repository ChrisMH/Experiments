@require "../../../global.styl"

titleHeight = 30px

countWidth = 80px

serverBlockWidth = 300px
serverBlockHeight = 122px

customerBlockWidth = 400px
customerBlockHeight = 82px
customerBlockExpandedHeight = 240px

spinnerColor = lighten(blue, 20%)

blockLeft()
    >>>.block-left
        flex-grow 1
        height 100%
        display flex
        flex-direction column
        blockTitle()
        blockExtraInfo()

blockRight(width)
    >>>.block-right
        flex 0 0 width
        height 100%
        display flex
        flex-direction column
        align-items flex-end
        blockCount()
        blockControls()

blockTitle()
    .block-title
        width 100%
        color inherit
        margin-left 4px
        font-size 16pt
        font-weight normal
        white-space nowrap
        overflow hidden
        text-overflow ellipsis

    .block-title-selected
        font-weight bold

blockExtraInfo()
    .block-extra-info
        width 100%
        font-size 11px
        display flex
        flex-direction column

        .block-extra-info-row
            width 100%
            display flex
            flex-direction row
            margin 1px 0px

            .block-extra-info-label
                flex 0 0 45%
                margin-right 2px
                text-align right
                vertical-align middle
                white-space nowrap
                overflow hidden

            .block-extra-info-value
                flex 0 0 55%
                font-weight 600
                vertical-align middle
                white-space nowrap
                overflow hidden
                

blockCount()
    .block-count
        background-color: transparent
        background-image: none
        font-size: 16pt
        font-weight: 600
        white-space: nowrap
        padding-right: 5px

        span
            vertical-align: middle
 

blockControls()
    .block-controls
        width 100%
        margin 4px
        flex-grow 1
        display flex
        flex-direction column
        justify-content flex-end
        align-items flex-end

        .block-spinner
            color: spinnerColor
            margin-bottom 8px
        
        .block-buttons
            display flex
            flex-direction row

            button
                padding: 0px !important
                margin: 0px 0px 0px 2px !important
                width: 22px
                height: 22px

blockSpinner()

//div
    // &#server-list
    //     position: relative
    //     width: serverBlockWidth

:host
    display flex
    flex-direction row

    div#server-list
        display flex
        flex-direction column
        width serverBlockWidth

        server-block
            flex 0 0 serverBlockHeight
            width 100%
            border 1px solid rgb(100,100,100)
            border-radius 1px
            overflow hidden
            margin-bottom 5px
            display flex
            flex-direction row
            blockLeft()
            blockRight(countWidth)

    // &#customer-backlog-list
    //     position: absolute
    //     left: customerBacklogLeft
    //     top: defaultMargin
    //     right: defaultMargin
    //     bottom: defaultMargin
    //     min-width: customerBlockWidth 

    //     div
    //         &.customer-block
    //             position: relative
    //             left: 0px
    //             margin-bottom: defaultMargin // (i * (defaultMargin + customerBlockHeight))
    //             width: 100%
    //             height: customerBlockHeight
    //             border: 1px solid rgb(100,100,100)
    //             border-radius: 1px
    //             overflow: hidden
    //             //visibility: collapse
    //             blockLeft("calc(100% - %s)" % countWidth, customerBlockHeight)
    //             blockRight(countWidth, customerBlockHeight)

    //             #tracker-list
    //                 position: absolute
    //                 left: 0px
    //                 top: customerBlockHeight
    //                 right: 0px
    //                 bottom: 0px
    //                 font-size: small
    //                 overflow-y: scroll
    //                 overflow-x: hidden
    //                 border-top: 1px solid rgb(100,100,100)


    //                 &.ng-hide
    //                     opacity: 0
    //                     height: 0px

    //                 &.ng-hide-add
    //                     -webkit-transition: all 0.49s ease-in-out
    //                     -moz-transition: all 0.49s ease-in-out
    //                     transition: all 0.49s ease-in-out

    //                 &.ng-hide-remove
    //                     -webkit-transition: all 0.5s ease-in-out
    //                     -moz-transition: all 0.5s ease-in-out
    //                     transition: all 0.5s ease-in-out

    //                 table
    //                     position: absolute
    //                     left: 0px
    //                     top: 0px
    //                     right: 0px
    //                     bottom: 0px

    //                     thead
    //                         font-weight: bold

    //                         td
    //                             padding: 3px

    //                     tbody
    //                         td
    //                             padding: 2px
    //                             font-size: x-small
    //                             vertical-align: middle

    //                             &.tracker-list-backlog
    //                                 font-size: larger
    //                                 font-weight: bold
    //                                 text-align: center


    //             &.customer-block.ng-enter,
    //             &.customer-block.ng-move
    //                 -webkit-transition: all 0.5s ease-in-out
    //                 -moz-transition: all 0.5s ease-in-out
    //                 -o-transition: all 0.5s ease-in-out
    //                 transition: all 0.5s ease-in-out
    //                 opacity: .5

    //                 &.customer-block.ng-move.ng-enter-active,
    //                 &.customer-block.ng-move.ng-move-active
    //                     opacity: 1

    //         &.customer-block-expanded
    //             height: customerBlockExpandedHeight !important

    //         &.customer-block-expanded-add
    //             -webkit-transition: 0.25s linear
    //             -moz-transition: 0.25s linear
    //             -o-transition: 0.25s linear
    //             transition: 0.25s linear

    //         &.customer-block-expanded-remove
    //             -webkit-transition: 0.25s linear
    //             -moz-transition: 0.25s linear
    //             -o-transition: 0.25s linear
    //             transition: 0.25s linear
            //.generate-customer-blocks(50)

/*
.generate-server-blocks(n, i: 0) when (i < n)
{
    &.server-block-{i}
    {
        position: relative
        margin-bottom: defaultMargin // (i * (defaultMargin + serverBlockHeight))
        width: 100%
        height: serverBlockHeight
        border: 1px solid rgb(100,100,100)
        border-radius: 1px
        overflow: hidden
        .block-left(calc(~"100% - countWidth"), serverBlockHeight)
        .block-right(countWidth, serverBlockHeight)
    }

    .generate-server-blocks(n, (i + 1))
}

.generate-customer-blocks(n, i: 0) when (i < n)
{
    &.customer-block-{i}
    {
        visibility: visible
    }

    &.customer-block-{i}-add
    {
        -webkit-transition: 1s linear
        -moz-transition: 1s linear
        -o-transition: 1s linear
        transition: 1s linear
    }

    &.customer-block-{i}-remove
    {
        -webkit-transition: 1s linear
        -moz-transition: 1s linear
        -o-transition: 1s linear
        transition: 1s linear
    }

    .generate-customer-blocks(n, (i + 1))
}
*/





>>>.server-block-good
    linear_gradient(right, rgb(0, 205, 0), backgroundColor)

>>>.server-block-poor
    linear_gradient(right, rgb(255,119,0), backgroundColor)

>>>.server-block-bad
    linear_gradient(right, rgb(224,0,0), backgroundColor)

>>>.customer-block-good
    linear_gradient(right, lighten(rgb(0, 205, 0), 30%), backgroundColor)

>>>.customer-block-poor
    linear_gradient(right, lighten(rgb(255,119,0), 30%), backgroundColor)

>>>.customer-block-bad 
    linear_gradient(right, lighten(rgb(224,0,0), 30%), backgroundColor)


